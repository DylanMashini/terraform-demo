var ne=Object.defineProperty,oe=(e,t,o)=>t in e?ne(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,L=(e,t,o)=>(oe(e,typeof t!="symbol"?t+"":t,o),o);function N(){}function C(e,t){for(const o in t)e[o]=t[o];return e}function St(e){return e()}function Ot(){return Object.create(null)}function D(e){e.forEach(St)}function Tt(e){return typeof e=="function"}function O(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function se(e){return Object.keys(e).length===0}function At(e,...t){if(e==null){for(const n of t)n(void 0);return N}const o=e.subscribe(...t);return o.unsubscribe?()=>o.unsubscribe():o}function re(e){let t;return At(e,o=>t=o)(),t}function nt(e,t,o){e.$$.on_destroy.push(At(t,o))}function ct(e,t,o,n){if(e){const s=Ht(e,t,o,n);return e[0](s)}}function Ht(e,t,o,n){return e[1]&&n?C(o.ctx.slice(),e[1](n(t))):o.ctx}function lt(e,t,o,n){if(e[2]&&n){const s=e[2](n(o));if(t.dirty===void 0)return s;if(typeof s=="object"){const r=[],i=Math.max(t.dirty.length,s.length);for(let c=0;c<i;c+=1)r[c]=t.dirty[c]|s[c];return r}return t.dirty|s}return t.dirty}function ut(e,t,o,n,s,r){if(s){const i=Ht(t,o,n,r);e.p(i,s)}}function at(e){if(e.ctx.length>32){const t=[],o=e.ctx.length/32;for(let n=0;n<o;n++)t[n]=-1;return t}return-1}function J(e){const t={};for(const o in e)o[0]!=="$"&&(t[o]=e[o]);return t}function Lt(e,t){const o={};t=new Set(t);for(const n in e)!t.has(n)&&n[0]!=="$"&&(o[n]=e[n]);return o}function gt(e,t,o){return e.set(o),t}function v(e,t){e.appendChild(t)}function ie(e,t,o){const n=ce(e);if(!n.getElementById(t)){const s=y("style");s.id=t,s.textContent=o,le(n,s)}}function ce(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function le(e,t){return v(e.head||e,t),t.sheet}function _(e,t,o){e.insertBefore(t,o||null)}function w(e){e.parentNode&&e.parentNode.removeChild(e)}function Pt(e,t){for(let o=0;o<e.length;o+=1)e[o]&&e[o].d(t)}function y(e){return document.createElement(e)}function Kt(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function dt(e){return document.createTextNode(e)}function T(){return dt(" ")}function ot(){return dt("")}function z(e,t,o,n){return e.addEventListener(t,o,n),()=>e.removeEventListener(t,o,n)}function h(e,t,o){o==null?e.removeAttribute(t):e.getAttribute(t)!==o&&e.setAttribute(t,o)}function ft(e,t){for(const o in t)h(e,o,t[o])}function ue(e){return Array.from(e.childNodes)}function Wt(e,t){t=""+t,e.data!==t&&(e.data=t)}function zt(e,t){e.value=t??""}function ae(e){const t={};return e.childNodes.forEach(o=>{t[o.slot||"default"]=!0}),t}let st;function rt(e){st=e}function de(){if(!st)throw new Error("Function called outside component initialization");return st}function fe(e){de().$$.on_mount.push(e)}function $e(e,t){const o=e.$$.callbacks[t.type];o&&o.slice().forEach(n=>n.call(this,t))}const Y=[],Z=[];let G=[];const mt=[],Bt=Promise.resolve();let bt=!1;function It(){bt||(bt=!0,Bt.then(wt))}function Dt(){return It(),Bt}function yt(e){G.push(e)}function vt(e){mt.push(e)}const xt=new Set;let Q=0;function wt(){if(Q!==0)return;const e=st;do{try{for(;Q<Y.length;){const t=Y[Q];Q++,rt(t),pe(t.$$)}}catch(t){throw Y.length=0,Q=0,t}for(rt(null),Y.length=0,Q=0;Z.length;)Z.pop()();for(let t=0;t<G.length;t+=1){const o=G[t];xt.has(o)||(xt.add(o),o())}G.length=0}while(Y.length);for(;mt.length;)mt.pop()();bt=!1,xt.clear(),rt(e)}function pe(e){if(e.fragment!==null){e.update(),D(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(yt)}}function he(e){const t=[],o=[];G.forEach(n=>e.indexOf(n)===-1?t.push(n):o.push(n)),o.forEach(n=>n()),G=t}const $t=new Set;let q;function U(){q={r:0,c:[],p:q}}function X(){q.r||D(q.c),q=q.p}function g(e,t){e&&e.i&&($t.delete(e),e.i(t))}function x(e,t,o,n){if(e&&e.o){if($t.has(e))return;$t.add(e),q.c.push(()=>{$t.delete(e),n&&(o&&e.d(1),n())}),e.o(t)}else n&&n()}function pt(e){return e?.length!==void 0?e:Array.from(e)}function it(e,t){const o={},n={},s={$$scope:1};let r=e.length;for(;r--;){const i=e[r],c=t[r];if(c){for(const l in i)l in c||(n[l]=1);for(const l in c)s[l]||(o[l]=c[l],s[l]=1);e[r]=c}else for(const l in i)s[l]=1}for(const i in n)i in o||(o[i]=void 0);return o}function kt(e){return typeof e=="object"&&e!==null?e:{}}function _t(e,t,o){const n=e.$$.props[t];n!==void 0&&(e.$$.bound[n]=o,o(e.$$.ctx[n]))}function A(e){e&&e.c()}function M(e,t,o){const{fragment:n,after_update:s}=e.$$;n&&n.m(t,o),yt(()=>{const r=e.$$.on_mount.map(St).filter(Tt);e.$$.on_destroy?e.$$.on_destroy.push(...r):D(r),e.$$.on_mount=[]}),s.forEach(yt)}function S(e,t){const o=e.$$;o.fragment!==null&&(he(o.after_update),D(o.on_destroy),o.fragment&&o.fragment.d(t),o.on_destroy=o.fragment=null,o.ctx=[])}function ge(e,t){e.$$.dirty[0]===-1&&(Y.push(e),It(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function K(e,t,o,n,s,r,i=null,c=[-1]){const l=st;rt(e);const u=e.$$={fragment:null,ctx:[],props:r,update:N,not_equal:s,bound:Ot(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(l?l.$$.context:[])),callbacks:Ot(),dirty:c,skip_bound:!1,root:t.target||l.$$.root};i&&i(u.root);let f=!1;if(u.ctx=o?o(e,t.props||{},(d,a,...p)=>{const $=p.length?p[0]:a;return u.ctx&&s(u.ctx[d],u.ctx[d]=$)&&(!u.skip_bound&&u.bound[d]&&u.bound[d]($),f&&ge(e,d)),a}):[],u.update(),f=!0,D(u.before_update),u.fragment=n?n(u.ctx):!1,t.target){if(t.hydrate){const d=ue(t.target);u.fragment&&u.fragment.l(d),d.forEach(w)}else u.fragment&&u.fragment.c();t.intro&&g(e.$$.fragment),M(e,t.target,t.anchor),wt()}rt(l)}let Jt;typeof HTMLElement=="function"&&(Jt=class extends HTMLElement{constructor(e,t,o){super(),L(this,"$$ctor"),L(this,"$$s"),L(this,"$$c"),L(this,"$$cn",!1),L(this,"$$d",{}),L(this,"$$r",!1),L(this,"$$p_d",{}),L(this,"$$l",{}),L(this,"$$l_u",new Map),this.$$ctor=e,this.$$s=t,o&&this.attachShadow({mode:"open"})}addEventListener(e,t,o){if(this.$$l[e]=this.$$l[e]||[],this.$$l[e].push(t),this.$$c){const n=this.$$c.$on(e,t);this.$$l_u.set(t,n)}super.addEventListener(e,t,o)}removeEventListener(e,t,o){if(super.removeEventListener(e,t,o),this.$$c){const n=this.$$l_u.get(t);n&&(n(),this.$$l_u.delete(t))}}async connectedCallback(){if(this.$$cn=!0,!this.$$c){let e=function(s){return()=>{let r;return{c:function(){r=y("slot"),s!=="default"&&h(r,"name",s)},m:function(i,c){_(i,r,c)},d:function(i){i&&w(r)}}}};if(await Promise.resolve(),!this.$$cn||this.$$c)return;const t={},o=ae(this);for(const s of this.$$s)s in o&&(t[s]=[e(s)]);for(const s of this.attributes){const r=this.$$g_p(s.name);r in this.$$d||(this.$$d[r]=ht(r,s.value,this.$$p_d,"toProp"))}for(const s in this.$$p_d)!(s in this.$$d)&&this[s]!==void 0&&(this.$$d[s]=this[s],delete this[s]);this.$$c=new this.$$ctor({target:this.shadowRoot||this,props:{...this.$$d,$$slots:t,$$scope:{ctx:[]}}});const n=()=>{this.$$r=!0;for(const s in this.$$p_d)if(this.$$d[s]=this.$$c.$$.ctx[this.$$c.$$.props[s]],this.$$p_d[s].reflect){const r=ht(s,this.$$d[s],this.$$p_d,"toAttribute");r==null?this.removeAttribute(this.$$p_d[s].attribute||s):this.setAttribute(this.$$p_d[s].attribute||s,r)}this.$$r=!1};this.$$c.$$.after_update.push(n),n();for(const s in this.$$l)for(const r of this.$$l[s]){const i=this.$$c.$on(s,r);this.$$l_u.set(r,i)}this.$$l={}}}attributeChangedCallback(e,t,o){var n;this.$$r||(e=this.$$g_p(e),this.$$d[e]=ht(e,o,this.$$p_d,"toProp"),(n=this.$$c)==null||n.$set({[e]:this.$$d[e]}))}disconnectedCallback(){this.$$cn=!1,Promise.resolve().then(()=>{this.$$cn||(this.$$c.$destroy(),this.$$c=void 0)})}$$g_p(e){return Object.keys(this.$$p_d).find(t=>this.$$p_d[t].attribute===e||!this.$$p_d[t].attribute&&t.toLowerCase()===e)||e}});function ht(e,t,o,n){var s;const r=(s=o[e])==null?void 0:s.type;if(t=r==="Boolean"&&typeof t!="boolean"?t!=null:t,!n||!o[e])return t;if(n==="toAttribute")switch(r){case"Object":case"Array":return t==null?null:JSON.stringify(t);case"Boolean":return t?"":null;case"Number":return t??null;default:return t}else switch(r){case"Object":case"Array":return t&&JSON.parse(t);case"Boolean":return t;case"Number":return t!=null?+t:t;default:return t}}function me(e,t,o,n,s,r){let i=class extends Jt{constructor(){super(e,o,s),this.$$p_d=t}static get observedAttributes(){return Object.keys(t).map(c=>(t[c].attribute||c).toLowerCase())}};return Object.keys(t).forEach(c=>{Object.defineProperty(i.prototype,c,{get(){return this.$$c&&c in this.$$c?this.$$c[c]:this.$$d[c]},set(l){var u;l=ht(c,l,t),this.$$d[c]=l,(u=this.$$c)==null||u.$set({[c]:l})}})}),n.forEach(c=>{Object.defineProperty(i.prototype,c,{get(){var l;return(l=this.$$c)==null?void 0:l[c]}})}),r&&(i=r(i)),e.element=i,i}class W{constructor(){L(this,"$$"),L(this,"$$set")}$destroy(){S(this,1),this.$destroy=N}$on(t,o){if(!Tt(o))return N;const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(o),()=>{const s=n.indexOf(o);s!==-1&&n.splice(s,1)}}$set(t){this.$$set&&!se(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const be="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(be);/**
 * @license lucide-svelte v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"},Rt=ye;function Vt(e,t,o){const n=e.slice();return n[11]=t[o][0],n[12]=t[o][1],n}function Nt(e){let t,o=[e[12]],n={};for(let s=0;s<o.length;s+=1)n=C(n,o[s]);return{c(){t=Kt(e[11]),ft(t,n)},m(s,r){_(s,t,r)},p(s,r){ft(t,n=it(o,[r&32&&s[12]]))},d(s){s&&w(t)}}}function qt(e){let t=e[11],o,n=e[11]&&Nt(e);return{c(){n&&n.c(),o=ot()},m(s,r){n&&n.m(s,r),_(s,o,r)},p(s,r){s[11]?t?O(t,s[11])?(n.d(1),n=Nt(s),t=s[11],n.c(),n.m(o.parentNode,o)):n.p(s,r):(n=Nt(s),t=s[11],n.c(),n.m(o.parentNode,o)):t&&(n.d(1),n=null,t=s[11])},d(s){s&&w(o),n&&n.d(s)}}}function ve(e){let t,o,n,s,r,i=pt(e[5]),c=[];for(let a=0;a<i.length;a+=1)c[a]=qt(Vt(e,i,a));const l=e[10].default,u=ct(l,e,e[9],null);let f=[Rt,e[7],{width:e[2]},{height:e[2]},{stroke:e[1]},{"stroke-width":n=e[4]?Number(e[3])*24/Number(e[2]):e[3]},{class:s=e[6]("lucide-icon","lucide",e[0]?`lucide-${e[0]}`:"",e[8].class)}],d={};for(let a=0;a<f.length;a+=1)d=C(d,f[a]);return{c(){t=Kt("svg");for(let a=0;a<c.length;a+=1)c[a].c();o=ot(),u&&u.c(),ft(t,d)},m(a,p){_(a,t,p);for(let $=0;$<c.length;$+=1)c[$]&&c[$].m(t,null);v(t,o),u&&u.m(t,null),r=!0},p(a,[p]){if(p&32){i=pt(a[5]);let $;for($=0;$<i.length;$+=1){const H=Vt(a,i,$);c[$]?c[$].p(H,p):(c[$]=qt(H),c[$].c(),c[$].m(t,o))}for(;$<c.length;$+=1)c[$].d(1);c.length=i.length}u&&u.p&&(!r||p&512)&&ut(u,l,a,a[9],r?lt(l,a[9],p,null):at(a[9]),null),ft(t,d=it(f,[Rt,p&128&&a[7],(!r||p&4)&&{width:a[2]},(!r||p&4)&&{height:a[2]},(!r||p&2)&&{stroke:a[1]},(!r||p&28&&n!==(n=a[4]?Number(a[3])*24/Number(a[2]):a[3]))&&{"stroke-width":n},(!r||p&257&&s!==(s=a[6]("lucide-icon","lucide",a[0]?`lucide-${a[0]}`:"",a[8].class)))&&{class:s}]))},i(a){r||(g(u,a),r=!0)},o(a){x(u,a),r=!1},d(a){a&&w(t),Pt(c,a),u&&u.d(a)}}}function xe(e,t,o){const n=["name","color","size","strokeWidth","absoluteStrokeWidth","iconNode","mergeClasses"];let s=Lt(t,n),{$$slots:r={},$$scope:i}=t,{name:c=void 0}=t,{color:l="currentColor"}=t,{size:u=24}=t,{strokeWidth:f=2}=t,{absoluteStrokeWidth:d=!1}=t,{iconNode:a}=t;const p=(...$)=>$.filter((H,F,m)=>!!H&&m.indexOf(H)===F).join(" ");return e.$$set=$=>{o(8,t=C(C({},t),J($))),o(7,s=Lt(t,n)),"name"in $&&o(0,c=$.name),"color"in $&&o(1,l=$.color),"size"in $&&o(2,u=$.size),"strokeWidth"in $&&o(3,f=$.strokeWidth),"absoluteStrokeWidth"in $&&o(4,d=$.absoluteStrokeWidth),"iconNode"in $&&o(5,a=$.iconNode),"$$scope"in $&&o(9,i=$.$$scope)},t=J(t),[c,l,u,f,d,a,p,s,t,i,r]}class we extends W{constructor(t){super(),K(this,t,xe,ve,O,{name:0,color:1,size:2,strokeWidth:3,absoluteStrokeWidth:4,iconNode:5,mergeClasses:6})}get mergeClasses(){return this.$$.ctx[6]}}const Et=we;function ke(e){let t;const o=e[2].default,n=ct(o,e,e[3],null);return{c(){n&&n.c()},m(s,r){n&&n.m(s,r),t=!0},p(s,r){n&&n.p&&(!t||r&8)&&ut(n,o,s,s[3],t?lt(o,s[3],r,null):at(s[3]),null)},i(s){t||(g(n,s),t=!0)},o(s){x(n,s),t=!1},d(s){n&&n.d(s)}}}function _e(e){let t,o;const n=[{name:"bot-message-square"},e[1],{iconNode:e[0]}];let s={$$slots:{default:[ke]},$$scope:{ctx:e}};for(let r=0;r<n.length;r+=1)s=C(s,n[r]);return t=new Et({props:s}),{c(){A(t.$$.fragment)},m(r,i){M(t,r,i),o=!0},p(r,[i]){const c=i&3?it(n,[n[0],i&2&&kt(r[1]),i&1&&{iconNode:r[0]}]):{};i&8&&(c.$$scope={dirty:i,ctx:r}),t.$set(c)},i(r){o||(g(t.$$.fragment,r),o=!0)},o(r){x(t.$$.fragment,r),o=!1},d(r){S(t,r)}}}function Ne(e,t,o){let{$$slots:n={},$$scope:s}=t;const r=[["path",{d:"M12 6V2H8"}],["path",{d:"m8 18-4 4V8a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2Z"}],["path",{d:"M2 12h2"}],["path",{d:"M9 11v2"}],["path",{d:"M15 11v2"}],["path",{d:"M20 12h2"}]];return e.$$set=i=>{o(1,t=C(C({},t),J(i))),"$$scope"in i&&o(3,s=i.$$scope)},t=J(t),[r,t,n,s]}class Ee extends W{constructor(t){super(),K(this,t,Ne,_e,O,{})}}const je=Ee;function Ce(e){let t;const o=e[2].default,n=ct(o,e,e[3],null);return{c(){n&&n.c()},m(s,r){n&&n.m(s,r),t=!0},p(s,r){n&&n.p&&(!t||r&8)&&ut(n,o,s,s[3],t?lt(o,s[3],r,null):at(s[3]),null)},i(s){t||(g(n,s),t=!0)},o(s){x(n,s),t=!1},d(s){n&&n.d(s)}}}function Me(e){let t,o;const n=[{name:"bot"},e[1],{iconNode:e[0]}];let s={$$slots:{default:[Ce]},$$scope:{ctx:e}};for(let r=0;r<n.length;r+=1)s=C(s,n[r]);return t=new Et({props:s}),{c(){A(t.$$.fragment)},m(r,i){M(t,r,i),o=!0},p(r,[i]){const c=i&3?it(n,[n[0],i&2&&kt(r[1]),i&1&&{iconNode:r[0]}]):{};i&8&&(c.$$scope={dirty:i,ctx:r}),t.$set(c)},i(r){o||(g(t.$$.fragment,r),o=!0)},o(r){x(t.$$.fragment,r),o=!1},d(r){S(t,r)}}}function Se(e,t,o){let{$$slots:n={},$$scope:s}=t;const r=[["path",{d:"M12 8V4H8"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2"}],["path",{d:"M2 14h2"}],["path",{d:"M20 14h2"}],["path",{d:"M15 13v2"}],["path",{d:"M9 13v2"}]];return e.$$set=i=>{o(1,t=C(C({},t),J(i))),"$$scope"in i&&o(3,s=i.$$scope)},t=J(t),[r,t,n,s]}class Oe extends W{constructor(t){super(),K(this,t,Se,Me,O,{})}}const Te=Oe;function Ae(e){let t;const o=e[2].default,n=ct(o,e,e[3],null);return{c(){n&&n.c()},m(s,r){n&&n.m(s,r),t=!0},p(s,r){n&&n.p&&(!t||r&8)&&ut(n,o,s,s[3],t?lt(o,s[3],r,null):at(s[3]),null)},i(s){t||(g(n,s),t=!0)},o(s){x(n,s),t=!1},d(s){n&&n.d(s)}}}function He(e){let t,o;const n=[{name:"user"},e[1],{iconNode:e[0]}];let s={$$slots:{default:[Ae]},$$scope:{ctx:e}};for(let r=0;r<n.length;r+=1)s=C(s,n[r]);return t=new Et({props:s}),{c(){A(t.$$.fragment)},m(r,i){M(t,r,i),o=!0},p(r,[i]){const c=i&3?it(n,[n[0],i&2&&kt(r[1]),i&1&&{iconNode:r[0]}]):{};i&8&&(c.$$scope={dirty:i,ctx:r}),t.$set(c)},i(r){o||(g(t.$$.fragment,r),o=!0)},o(r){x(t.$$.fragment,r),o=!1},d(r){S(t,r)}}}function Le(e,t,o){let{$$slots:n={},$$scope:s}=t;const r=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}],["circle",{cx:"12",cy:"7",r:"4"}]];return e.$$set=i=>{o(1,t=C(C({},t),J(i))),"$$scope"in i&&o(3,s=i.$$scope)},t=J(t),[r,t,n,s]}class Pe extends W{constructor(t){super(),K(this,t,Le,He,O,{})}}const Ke=Pe;function Ft(e){let t,o,n,s,r,i,c;return o=new je({}),{c(){t=y("button"),A(o.$$.fragment),n=T(),s=y("span"),s.textContent="Open chat",h(s,"class","sr-only"),h(t,"class","inline-flex items-center justify-center whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input hover:text-accent-foreground h-10 w-10 rounded-full bg-gray-900 text-gray-50 shadow-lg hover:bg-gray-900/90 focus:outline-none focus:ring-2 focus:ring-gray-950 dark:bg-gray-50 dark:text-gray-900 dark:hover:bg-gray-50/90 dark:focus:ring-gray-300"),h(t,"type","button"),h(t,"aria-haspopup","dialog"),h(t,"aria-expanded","false"),h(t,"aria-controls","radix-:r1h:"),h(t,"data-state","closed")},m(l,u){_(l,t,u),M(o,t,null),v(t,n),v(t,s),r=!0,i||(c=z(t,"click",e[1]),i=!0)},i(l){r||(g(o.$$.fragment,l),r=!0)},o(l){x(o.$$.fragment,l),r=!1},d(l){l&&w(t),S(o),i=!1,c()}}}function We(e){let t,o,n=!e[0]&&Ft(e);return{c(){n&&n.c(),t=ot()},m(s,r){n&&n.m(s,r),_(s,t,r),o=!0},p(s,[r]){s[0]?n&&(U(),x(n,1,1,()=>{n=null}),X()):n?r&1&&g(n,1):(n=Ft(s),n.c(),g(n,1),n.m(t.parentNode,t))},i(s){o||(g(n),o=!0)},o(s){x(n),o=!1},d(s){s&&w(t),n&&n.d(s)}}}function ze(e,t,o){let{open:n}=t;function s(r){$e.call(this,e,r)}return e.$$set=r=>{"open"in r&&o(0,n=r.open)},[n,s]}class Be extends W{constructor(t){super(),K(this,t,ze,We,O,{open:0})}}function Ie(e){let t,o;return t=new Ke({}),{c(){A(t.$$.fragment)},m(n,s){M(t,n,s),o=!0},i(n){o||(g(t.$$.fragment,n),o=!0)},o(n){x(t.$$.fragment,n),o=!1},d(n){S(t,n)}}}function De(e){let t,o;return t=new Te({}),{c(){A(t.$$.fragment)},m(n,s){M(t,n,s),o=!0},i(n){o||(g(t.$$.fragment,n),o=!0)},o(n){x(t.$$.fragment,n),o=!1},d(n){S(t,n)}}}function Je(e){let t,o,n,s,r;const i=[De,Ie],c=[];function l(u,f){return u[0]=="agent"?0:1}return n=l(e),s=c[n]=i[n](e),{c(){t=y("span"),o=y("span"),s.c(),h(o,"class","flex h-full w-full items-center justify-center rounded-full bg-muted"),h(t,"class","relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full")},m(u,f){_(u,t,f),v(t,o),c[n].m(o,null),r=!0},p(u,[f]){let d=n;n=l(u),n!==d&&(U(),x(c[d],1,1,()=>{c[d]=null}),X(),s=c[n],s||(s=c[n]=i[n](u),s.c()),g(s,1),s.m(o,null))},i(u){r||(g(s),r=!0)},o(u){x(s),r=!1},d(u){u&&w(t),c[n].d()}}}function Re(e,t,o){let{author:n}=t;return e.$$set=s=>{"author"in s&&o(0,n=s.author)},[n]}class Yt extends W{constructor(t){super(),K(this,t,Re,Je,O,{author:0})}}const tt=[];function Zt(e,t=N){let o;const n=new Set;function s(c){if(O(e,c)&&(e=c,o)){const l=!tt.length;for(const u of n)u[1](),tt.push(u,e);if(l){for(let u=0;u<tt.length;u+=2)tt[u][0](tt[u+1]);tt.length=0}}}function r(c){s(c(e))}function i(c,l=N){const u=[c,l];return n.add(u),n.size===1&&(o=t(s,r)||N),c(e),()=>{n.delete(u),n.size===0&&o&&(o(),o=null)}}return{set:s,update:r,subscribe:i}}const Gt={contents:"Hello, how can I assist you today?",author:"agent",updating:!1};let R=JSON.parse(window.localStorage.getItem("ChatPluginMessageHistory")||"null");(R===null||R.length===0)&&(R=[Gt]),R[R.length-1].updating&&(R.pop(),R.pop());let P=Zt(R);P.subscribe(e=>{localStorage.setItem("ChatPluginMessageHistory",JSON.stringify(e))});let et=Zt("TextInput");function Ve(e){let t,o,n,s,r;return{c(){t=y("button"),t.textContent="End",o=T(),n=y("button"),n.textContent="Continue",h(t,"class","inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border h-10 px-4 py-2 bg-transparent border-red-500 text-red-500 hover:bg-red-500 hover:text-gray-50 w-1/2"),h(n,"class","inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input hover:text-accent-foreground h-10 px-4 py-2 bg-white text-gray-900 hover:bg-gray-200 w-1/2")},m(i,c){_(i,t,c),_(i,o,c),_(i,n,c),s||(r=[z(t,"click",e[0]),z(n,"click",e[1])],s=!0)},p:N,i:N,o:N,d(i){i&&(w(t),w(o),w(n)),s=!1,D(r)}}}function qe(e,t,o){let n,s;nt(e,P,l=>o(3,n=l)),nt(e,et,l=>o(4,s=l));let{open:r}=t;const i=()=>{gt(P,n=[Gt],n),gt(et,s="TextInput",s),o(2,r=!1)},c=()=>{n.push({contents:"<END>",author:"agent",updating:!1,hidden:!0}),n.push({contents:"SYSTEM: The user indicated they wanted to continue the conversation. Await their next message.",author:"user",updating:!1,hidden:!0}),gt(et,s="TextInput",s),P.set(n)};return e.$$set=l=>{"open"in l&&o(2,r=l.open)},[i,c,r]}class Fe extends W{constructor(t){super(),K(this,t,qe,Ve,O,{open:2})}}function Ye(e){let t,o,n,s,r;return{c(){t=y("input"),o=T(),n=y("button"),n.textContent="Send",h(t,"class","flex-1 flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"),h(t,"placeholder","Type your message..."),h(n,"class","inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-10 px-4 py-2")},m(i,c){_(i,t,c),zt(t,e[0]),_(i,o,c),_(i,n,c),s||(r=[z(t,"input",e[2]),z(t,"keydown",e[3]),z(n,"click",e[1])],s=!0)},p(i,[c]){c&1&&t.value!==i[0]&&zt(t,i[0])},i:N,o:N,d(i){i&&(w(t),w(o),w(n)),s=!1,D(r)}}}function Ze(e,t,o){let n;nt(e,P,l=>o(4,n=l));let{message:s}=t;const r=()=>{s&&!n[n.length-1].updating&&(n.push({author:"user",contents:s,updating:!1}),P.set(n),o(0,s=""))};function i(){s=this.value,o(0,s)}const c=l=>l.key=="Enter"&&r();return e.$$set=l=>{"message"in l&&o(0,s=l.message)},[s,r,i,c]}class Ge extends W{constructor(t){super(),K(this,t,Ze,Ye,O,{message:0})}}function Qt(e,t,o){const n=e.slice();return n[5]=t[o],n}function Ut(e){let t,o,n,s,r,i,c,l,u,f,d,a,p,$,H,F,m=e[2]&&Xt(e),V=pt(e[3]),k=[];for(let b=0;b<V.length;b+=1)k[b]=te(Qt(e,V,b));const ee=b=>x(k[b],1,1,()=>{k[b]=null}),jt=[on,nn],B=[];function Ct(b,E){return b[4]=="TextInput"?0:b[4]=="EndConversationPrompt"?1:-1}return~(a=Ct(e))&&(p=B[a]=jt[a](e)),{c(){t=y("div"),o=y("div"),m&&m.c(),n=T(),s=y("div"),r=y("div"),r.innerHTML='<div class="text-sm font-medium">Support Agent</div>',i=T(),c=y("button"),c.innerHTML='<svg class="h-5 w-5" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"></path><path d="m6 6 12 12"></path></svg> <span class="sr-only">Close chat</span>',l=T(),u=y("div");for(let b=0;b<k.length;b+=1)k[b].c();f=T(),d=y("div"),p&&p.c(),h(r,"class","flex items-center gap-3"),h(s,"class","bg-gray-900 text-gray-50 px-4 py-3 rounded-t-lg flex items-center justify-between"),h(u,"class","flex-1 overflow-y-auto p-4 space-y-4 relative"),h(d,"class","bg-gray-100 px-4 py-3 rounded-b-lg flex items-center gap-2"),h(o,"class","flex flex-col h-[500px]"),h(t,"class","w-full max-w-md rounded-lg shadow-l bg-white")},m(b,E){_(b,t,E),v(t,o),m&&m.m(o,null),v(o,n),v(o,s),v(s,r),v(s,i),v(s,c),v(o,l),v(o,u);for(let I=0;I<k.length;I+=1)k[I]&&k[I].m(u,null);e[10](u),v(o,f),v(o,d),~a&&B[a].m(d,null),$=!0,H||(F=[z(c,"click",e[9]),z(u,"scroll",e[6])],H=!0)},p(b,E){if(b[2]?m?m.p(b,E):(m=Xt(b),m.c(),m.m(o,n)):m&&(m.d(1),m=null),E&8){V=pt(b[3]);let j;for(j=0;j<V.length;j+=1){const Mt=Qt(b,V,j);k[j]?(k[j].p(Mt,E),g(k[j],1)):(k[j]=te(Mt),k[j].c(),g(k[j],1),k[j].m(u,null))}for(U(),j=V.length;j<k.length;j+=1)ee(j);X()}let I=a;a=Ct(b),a===I?~a&&B[a].p(b,E):(p&&(U(),x(B[I],1,1,()=>{B[I]=null}),X()),~a?(p=B[a],p?p.p(b,E):(p=B[a]=jt[a](b),p.c()),g(p,1),p.m(d,null)):p=null)},i(b){if(!$){for(let E=0;E<V.length;E+=1)g(k[E]);g(p),$=!0}},o(b){k=k.filter(Boolean);for(let E=0;E<k.length;E+=1)x(k[E]);x(p),$=!1},d(b){b&&w(t),m&&m.d(),Pt(k,b),e[10](null),~a&&B[a].d(),H=!1,D(F)}}}function Xt(e){let t,o,n;return{c(){t=y("button"),t.textContent="Down",h(t,"class","bg-opacity-25 bg-black w-4 h-4 rounded-full absolute right-1/2 bottom-14")},m(s,r){_(s,t,r),o||(n=z(t,"click",e[7]),o=!0)},p:N,d(s){s&&w(t),o=!1,n()}}}function Qe(e){let t,o,n,s,r=e[5].contents+"",i,c,l,u,f;return l=new Yt({props:{author:e[5].author}}),{c(){t=y("div"),o=y("div"),n=y("div"),s=y("p"),i=dt(r),c=T(),A(l.$$.fragment),u=T(),h(n,"class","bg-gray-900 text-gray-50 p-3 rounded-lg max-w-[75%] text-sm"),h(o,"class","flex items-start gap-3 justify-end"),h(t,"class","flex items-start justify-end gap-3")},m(d,a){_(d,t,a),v(t,o),v(o,n),v(n,s),v(s,i),v(o,c),M(l,o,null),v(t,u),f=!0},p(d,a){(!f||a&8)&&r!==(r=d[5].contents+"")&&Wt(i,r);const p={};a&8&&(p.author=d[5].author),l.$set(p)},i(d){f||(g(l.$$.fragment,d),f=!0)},o(d){x(l.$$.fragment,d),f=!1},d(d){d&&w(t),S(l)}}}function Ue(e){let t,o,n,s,r,i,c;n=new Yt({props:{author:e[5].author}});function l(d,a){return d[5].updating?en:tn}let u=l(e),f=u(e);return{c(){t=y("div"),o=y("div"),A(n.$$.fragment),s=T(),r=y("div"),f.c(),i=T(),h(r,"class","bg-gray-100 p-3 rounded-lg max-w-[75%] text-sm"),h(o,"class","flex items-start gap-3"),h(t,"class","flex items-start gap-3")},m(d,a){_(d,t,a),v(t,o),M(n,o,null),v(o,s),v(o,r),f.m(r,null),v(t,i),c=!0},p(d,a){const p={};a&8&&(p.author=d[5].author),n.$set(p),u===(u=l(d))&&f?f.p(d,a):(f.d(1),f=u(d),f&&(f.c(),f.m(r,null)))},i(d){c||(g(n.$$.fragment,d),c=!0)},o(d){x(n.$$.fragment,d),c=!1},d(d){d&&w(t),S(n),f.d()}}}function Xe(e){return{c:N,m:N,p:N,i:N,o:N,d:N}}function tn(e){let t,o=e[5].contents+"",n;return{c(){t=y("p"),n=dt(o)},m(s,r){_(s,t,r),v(t,n)},p(s,r){r&8&&o!==(o=s[5].contents+"")&&Wt(n,o)},d(s){s&&w(t)}}}function en(e){let t;return{c(){t=y("div"),t.innerHTML='<div class="typing-dot svelte-1vr6k1j"></div> <div class="typing-dot svelte-1vr6k1j"></div> <div class="typing-dot svelte-1vr6k1j"></div>',h(t,"class","flex items-center justify-center gap-1")},m(o,n){_(o,t,n)},p:N,d(o){o&&w(t)}}}function te(e){let t,o,n,s;const r=[Xe,Ue,Qe],i=[];function c(l,u){return l[5].hidden?0:l[5].author=="agent"?1:2}return t=c(e),o=i[t]=r[t](e),{c(){o.c(),n=ot()},m(l,u){i[t].m(l,u),_(l,n,u),s=!0},p(l,u){let f=t;t=c(l),t===f?i[t].p(l,u):(U(),x(i[f],1,1,()=>{i[f]=null}),X(),o=i[t],o?o.p(l,u):(o=i[t]=r[t](l),o.c()),g(o,1),o.m(n.parentNode,n))},i(l){s||(g(o),s=!0)},o(l){x(o),s=!1},d(l){l&&w(n),i[t].d(l)}}}function nn(e){let t,o,n;function s(i){e[12](i)}let r={};return e[0]!==void 0&&(r.open=e[0]),t=new Fe({props:r}),Z.push(()=>_t(t,"open",s)),{c(){A(t.$$.fragment)},m(i,c){M(t,i,c),n=!0},p(i,c){const l={};!o&&c&1&&(o=!0,l.open=i[0],vt(()=>o=!1)),t.$set(l)},i(i){n||(g(t.$$.fragment,i),n=!0)},o(i){x(t.$$.fragment,i),n=!1},d(i){S(t,i)}}}function on(e){let t,o,n;function s(i){e[11](i)}let r={};return e[5]!==void 0&&(r.message=e[5]),t=new Ge({props:r}),Z.push(()=>_t(t,"message",s)),{c(){A(t.$$.fragment)},m(i,c){M(t,i,c),n=!0},p(i,c){const l={};!o&&c&32&&(o=!0,l.message=i[5],vt(()=>o=!1)),t.$set(l)},i(i){n||(g(t.$$.fragment,i),n=!0)},o(i){x(t.$$.fragment,i),n=!1},d(i){S(t,i)}}}function sn(e){let t,o,n=e[0]&&Ut(e);return{c(){n&&n.c(),t=ot()},m(s,r){n&&n.m(s,r),_(s,t,r),o=!0},p(s,[r]){s[0]?n?(n.p(s,r),r&1&&g(n,1)):(n=Ut(s),n.c(),g(n,1),n.m(t.parentNode,t)):n&&(U(),x(n,1,1,()=>{n=null}),X())},i(s){o||(g(n),o=!0)},o(s){x(n),o=!1},d(s){s&&w(t),n&&n.d(s)}}}function rn(e,t,o){let n,s;nt(e,P,m=>o(3,n=m)),nt(e,et,m=>o(4,s=m));let{open:r}=t,i="",c,l,u=!1,f=0;const d=()=>{if(c.scrollTop===c.scrollHeight-c.offsetHeight){o(2,u=!1);return}u||f>c.scrollTop&&o(2,u=!0),f=c.scrollTop},a=()=>{r&&c.scroll({top:c.scrollHeight,behavior:"smooth"})},p=()=>o(0,r=!r);function $(m){Z[m?"unshift":"push"](()=>{c=m,o(1,c)})}function H(m){i=m,o(5,i)}function F(m){r=m,o(0,r)}return e.$$set=m=>{"open"in m&&o(0,r=m.open)},e.$$.update=()=>{e.$$.dirty&263&&(r&&!l?(o(8,l=new MutationObserver(m=>{u||a()})),Dt().then(()=>{a(),l.observe(c,{childList:!0,subtree:!0,attributes:!1})})):r||o(8,l=void 0))},[r,c,u,n,s,i,d,a,l,p,$,H,F]}class cn extends W{constructor(t){super(),K(this,t,rn,sn,O,{open:0})}}async function ln(e){let t="https://api.demo.dylanmashini.com";P.subscribe(async o=>{if(o[o.length-1].author==="user"&&re(et)==="TextInput"){let n=fetch(`${t}/create-chat`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({api_key:e,messages:o.map(r=>({message:r.contents,author:r.author}))})});P.update(r=>(r.push({author:"agent",contents:"",updating:!0}),r));let s=await(await n).json();if(s.response.includes("<END>")){et.set("EndConversationPrompt"),P.update(r=>(r.pop(),r=r,console.log(r),r));return}P.update(r=>(r[r.length-1].updating=!1,r[r.length-1].contents=s.response,r))}})}function un(){let e=document.body.getElementsByTagName("my-component")[0].shadowRoot,t=document.createElement("link");t.rel="stylesheet",t.href="https://demo.dylanmashini.com/style.css",e.appendChild(t)}function an(e){ie(e,"svelte-va4hx6",".root.svelte-va4hx6{display:none}")}function dn(e){let t,o,n,s,r,i,c;n=new Be({props:{open:e[0]}}),n.$on("click",e[2]);function l(f){e[3](f)}let u={};return e[0]!==void 0&&(u.open=e[0]),r=new cn({props:u}),Z.push(()=>_t(r,"open",l)),{c(){t=y("div"),o=y("div"),A(n.$$.fragment),s=T(),A(r.$$.fragment),h(o,"class","fixed bottom-4 right-4 z-50"),h(t,"class","root svelte-va4hx6")},m(f,d){_(f,t,d),v(t,o),M(n,o,null),v(o,s),M(r,o,null),c=!0},p(f,[d]){const a={};d&1&&(a.open=f[0]),n.$set(a);const p={};!i&&d&1&&(i=!0,p.open=f[0],vt(()=>i=!1)),r.$set(p)},i(f){c||(g(n.$$.fragment,f),g(r.$$.fragment,f),c=!0)},o(f){x(n.$$.fragment,f),x(r.$$.fragment,f),c=!1},d(f){f&&w(t),S(n),S(r)}}}function fn(e,t,o){let{publicKey:n}=t;fe(async()=>{un(),await Dt(),ln(n)});let s=!1;const r=()=>o(0,s=!s);function i(c){s=c,o(0,s)}return e.$$set=c=>{"publicKey"in c&&o(1,n=c.publicKey)},[s,n,r,i]}class $n extends W{constructor(t){super(),K(this,t,fn,dn,O,{publicKey:1},an)}get publicKey(){return this.$$.ctx[1]}set publicKey(t){this.$$set({publicKey:t}),wt()}}customElements.define("my-component",me($n,{publicKey:{}},[],[],!0));function pn(e){let t=document.createElement("my-component");t.publicKey=e.publicKey,window.onload=function(){document.body.appendChild(t)}}export{pn as default};
