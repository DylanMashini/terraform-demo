var myLibrary=function(){"use strict";var dn=Object.defineProperty;var hn=(k,N,W)=>N in k?dn(k,N,{enumerable:!0,configurable:!0,writable:!0,value:W}):k[N]=W;var H=(k,N,W)=>(hn(k,typeof N!="symbol"?N+"":N,W),W);function k(){}function N(t,e){for(const s in e)t[s]=e[s];return t}function W(t){return t()}function je(){return Object.create(null)}function K(t){t.forEach(W)}function Me(t){return typeof t=="function"}function O(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function tt(t){return Object.keys(t).length===0}function Te(t,...e){if(t==null){for(const n of e)n(void 0);return k}const s=t.subscribe(...e);return s.unsubscribe?()=>s.unsubscribe():s}function nt(t){let e;return Te(t,s=>e=s)(),e}function se(t,e,s){t.$$.on_destroy.push(Te(e,s))}function ue(t,e,s,n){if(t){const o=Oe(t,e,s,n);return t[0](o)}}function Oe(t,e,s,n){return t[1]&&n?N(s.ctx.slice(),t[1](n(e))):s.ctx}function ce(t,e,s,n){if(t[2]&&n){const o=t[2](n(s));if(e.dirty===void 0)return o;if(typeof o=="object"){const r=[],i=Math.max(e.dirty.length,o.length);for(let l=0;l<i;l+=1)r[l]=e.dirty[l]|o[l];return r}return e.dirty|o}return e.dirty}function fe(t,e,s,n,o,r){if(o){const i=Oe(e,s,n,r);t.p(i,o)}}function ae(t){if(t.ctx.length>32){const e=[],s=t.ctx.length/32;for(let n=0;n<s;n++)e[n]=-1;return e}return-1}function q(t){const e={};for(const s in t)s[0]!=="$"&&(e[s]=t[s]);return e}function xe(t,e){const s={};e=new Set(e);for(const n in t)!e.has(n)&&n[0]!=="$"&&(s[n]=t[n]);return s}function _e(t,e,s){return t.set(s),e}function v(t,e){t.appendChild(e)}function st(t,e,s){const n=ot(t);if(!n.getElementById(e)){const o=$("style");o.id=e,o.textContent=s,rt(n,o)}}function ot(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function rt(t,e){return v(t.head||t,e),e.sheet}function C(t,e,s){t.insertBefore(e,s||null)}function w(t){t.parentNode&&t.parentNode.removeChild(t)}function Ae(t,e){for(let s=0;s<t.length;s+=1)t[s]&&t[s].d(e)}function $(t){return document.createElement(t)}function He(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function de(t){return document.createTextNode(t)}function x(){return de(" ")}function oe(){return de("")}function z(t,e,s,n){return t.addEventListener(e,s,n),()=>t.removeEventListener(e,s,n)}function g(t,e,s){s==null?t.removeAttribute(e):t.getAttribute(e)!==s&&t.setAttribute(e,s)}function he(t,e){for(const s in e)g(t,s,e[s])}function it(t){return Array.from(t.childNodes)}function Pe(t,e){e=""+e,t.data!==e&&(t.data=e)}function Le(t,e){t.value=e??""}function lt(t){const e={};return t.childNodes.forEach(s=>{e[s.slot||"default"]=!0}),e}let re;function ie(t){re=t}function ut(){if(!re)throw new Error("Function called outside component initialization");return re}function ct(t){ut().$$.on_mount.push(t)}function ft(t,e){const s=t.$$.callbacks[e.type];s&&s.slice().forEach(n=>n.call(this,e))}const Y=[],F=[];let Z=[];const be=[],Be=Promise.resolve();let $e=!1;function Ie(){$e||($e=!0,Be.then(we))}function ze(){return Ie(),Be}function ve(t){Z.push(t)}function ye(t){be.push(t)}const ke=new Set;let G=0;function we(){if(G!==0)return;const t=re;do{try{for(;G<Y.length;){const e=Y[G];G++,ie(e),at(e.$$)}}catch(e){throw Y.length=0,G=0,e}for(ie(null),Y.length=0,G=0;F.length;)F.pop()();for(let e=0;e<Z.length;e+=1){const s=Z[e];ke.has(s)||(ke.add(s),s())}Z.length=0}while(Y.length);for(;be.length;)be.pop()();$e=!1,ke.clear(),ie(t)}function at(t){if(t.fragment!==null){t.update(),K(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(ve)}}function dt(t){const e=[],s=[];Z.forEach(n=>t.indexOf(n)===-1?e.push(n):s.push(n)),s.forEach(n=>n()),Z=e}const pe=new Set;let U;function Q(){U={r:0,c:[],p:U}}function X(){U.r||K(U.c),U=U.p}function m(t,e){t&&t.i&&(pe.delete(t),t.i(e))}function y(t,e,s,n){if(t&&t.o){if(pe.has(t))return;pe.add(t),U.c.push(()=>{pe.delete(t),n&&(s&&t.d(1),n())}),t.o(e)}else n&&n()}function ge(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function le(t,e){const s={},n={},o={$$scope:1};let r=t.length;for(;r--;){const i=t[r],l=e[r];if(l){for(const u in i)u in l||(n[u]=1);for(const u in l)o[u]||(s[u]=l[u],o[u]=1);t[r]=l}else for(const u in i)o[u]=1}for(const i in n)i in s||(s[i]=void 0);return s}function Ne(t){return typeof t=="object"&&t!==null?t:{}}function Ce(t,e,s){const n=t.$$.props[e];n!==void 0&&(t.$$.bound[n]=s,s(t.$$.ctx[n]))}function A(t){t&&t.c()}function M(t,e,s){const{fragment:n,after_update:o}=t.$$;n&&n.m(e,s),ve(()=>{const r=t.$$.on_mount.map(W).filter(Me);t.$$.on_destroy?t.$$.on_destroy.push(...r):K(r),t.$$.on_mount=[]}),o.forEach(ve)}function T(t,e){const s=t.$$;s.fragment!==null&&(dt(s.after_update),K(s.on_destroy),s.fragment&&s.fragment.d(e),s.on_destroy=s.fragment=null,s.ctx=[])}function ht(t,e){t.$$.dirty[0]===-1&&(Y.push(t),Ie(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function B(t,e,s,n,o,r,i=null,l=[-1]){const u=re;ie(t);const c=t.$$={fragment:null,ctx:[],props:r,update:k,not_equal:o,bound:je(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:je(),dirty:l,skip_bound:!1,root:e.target||u.$$.root};i&&i(c.root);let d=!1;if(c.ctx=s?s(t,e.props||{},(a,f,...p)=>{const h=p.length?p[0]:f;return c.ctx&&o(c.ctx[a],c.ctx[a]=h)&&(!c.skip_bound&&c.bound[a]&&c.bound[a](h),d&&ht(t,a)),f}):[],c.update(),d=!0,K(c.before_update),c.fragment=n?n(c.ctx):!1,e.target){if(e.hydrate){const a=it(e.target);c.fragment&&c.fragment.l(a),a.forEach(w)}else c.fragment&&c.fragment.c();e.intro&&m(t.$$.fragment),M(t,e.target,e.anchor),we()}ie(u)}let We;typeof HTMLElement=="function"&&(We=class extends HTMLElement{constructor(e,s,n){super();H(this,"$$ctor");H(this,"$$s");H(this,"$$c");H(this,"$$cn",!1);H(this,"$$d",{});H(this,"$$r",!1);H(this,"$$p_d",{});H(this,"$$l",{});H(this,"$$l_u",new Map);this.$$ctor=e,this.$$s=s,n&&this.attachShadow({mode:"open"})}addEventListener(e,s,n){if(this.$$l[e]=this.$$l[e]||[],this.$$l[e].push(s),this.$$c){const o=this.$$c.$on(e,s);this.$$l_u.set(s,o)}super.addEventListener(e,s,n)}removeEventListener(e,s,n){if(super.removeEventListener(e,s,n),this.$$c){const o=this.$$l_u.get(s);o&&(o(),this.$$l_u.delete(s))}}async connectedCallback(){if(this.$$cn=!0,!this.$$c){let e=function(r){return()=>{let i;return{c:function(){i=$("slot"),r!=="default"&&g(i,"name",r)},m:function(c,d){C(c,i,d)},d:function(c){c&&w(i)}}}};if(await Promise.resolve(),!this.$$cn||this.$$c)return;const s={},n=lt(this);for(const r of this.$$s)r in n&&(s[r]=[e(r)]);for(const r of this.attributes){const i=this.$$g_p(r.name);i in this.$$d||(this.$$d[i]=me(i,r.value,this.$$p_d,"toProp"))}for(const r in this.$$p_d)!(r in this.$$d)&&this[r]!==void 0&&(this.$$d[r]=this[r],delete this[r]);this.$$c=new this.$$ctor({target:this.shadowRoot||this,props:{...this.$$d,$$slots:s,$$scope:{ctx:[]}}});const o=()=>{this.$$r=!0;for(const r in this.$$p_d)if(this.$$d[r]=this.$$c.$$.ctx[this.$$c.$$.props[r]],this.$$p_d[r].reflect){const i=me(r,this.$$d[r],this.$$p_d,"toAttribute");i==null?this.removeAttribute(this.$$p_d[r].attribute||r):this.setAttribute(this.$$p_d[r].attribute||r,i)}this.$$r=!1};this.$$c.$$.after_update.push(o),o();for(const r in this.$$l)for(const i of this.$$l[r]){const l=this.$$c.$on(r,i);this.$$l_u.set(i,l)}this.$$l={}}}attributeChangedCallback(e,s,n){var o;this.$$r||(e=this.$$g_p(e),this.$$d[e]=me(e,n,this.$$p_d,"toProp"),(o=this.$$c)==null||o.$set({[e]:this.$$d[e]}))}disconnectedCallback(){this.$$cn=!1,Promise.resolve().then(()=>{this.$$cn||(this.$$c.$destroy(),this.$$c=void 0)})}$$g_p(e){return Object.keys(this.$$p_d).find(s=>this.$$p_d[s].attribute===e||!this.$$p_d[s].attribute&&s.toLowerCase()===e)||e}});function me(t,e,s,n){var r;const o=(r=s[t])==null?void 0:r.type;if(e=o==="Boolean"&&typeof e!="boolean"?e!=null:e,!n||!s[t])return e;if(n==="toAttribute")switch(o){case"Object":case"Array":return e==null?null:JSON.stringify(e);case"Boolean":return e?"":null;case"Number":return e??null;default:return e}else switch(o){case"Object":case"Array":return e&&JSON.parse(e);case"Boolean":return e;case"Number":return e!=null?+e:e;default:return e}}function pt(t,e,s,n,o,r){let i=class extends We{constructor(){super(t,s,o),this.$$p_d=e}static get observedAttributes(){return Object.keys(e).map(l=>(e[l].attribute||l).toLowerCase())}};return Object.keys(e).forEach(l=>{Object.defineProperty(i.prototype,l,{get(){return this.$$c&&l in this.$$c?this.$$c[l]:this.$$d[l]},set(u){var c;u=me(l,u,e),this.$$d[l]=u,(c=this.$$c)==null||c.$set({[l]:u})}})}),n.forEach(l=>{Object.defineProperty(i.prototype,l,{get(){var u;return(u=this.$$c)==null?void 0:u[l]}})}),r&&(i=r(i)),t.element=i,i}class I{constructor(){H(this,"$$");H(this,"$$set")}$destroy(){T(this,1),this.$destroy=k}$on(e,s){if(!Me(s))return k;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(s),()=>{const o=n.indexOf(s);o!==-1&&n.splice(o,1)}}$set(e){this.$$set&&!tt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const gt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(gt);const pn="";/**
 * @license lucide-svelte v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};function qe(t,e,s){const n=t.slice();return n[11]=e[s][0],n[12]=e[s][1],n}function Ee(t){let e,s=[t[12]],n={};for(let o=0;o<s.length;o+=1)n=N(n,s[o]);return{c(){e=He(t[11]),he(e,n)},m(o,r){C(o,e,r)},p(o,r){he(e,n=le(s,[r&32&&o[12]]))},d(o){o&&w(e)}}}function De(t){let e=t[11],s,n=t[11]&&Ee(t);return{c(){n&&n.c(),s=oe()},m(o,r){n&&n.m(o,r),C(o,s,r)},p(o,r){o[11]?e?O(e,o[11])?(n.d(1),n=Ee(o),e=o[11],n.c(),n.m(s.parentNode,s)):n.p(o,r):(n=Ee(o),e=o[11],n.c(),n.m(s.parentNode,s)):e&&(n.d(1),n=null,e=o[11])},d(o){o&&w(s),n&&n.d(o)}}}function mt(t){let e,s,n,o,r,i=ge(t[5]),l=[];for(let f=0;f<i.length;f+=1)l[f]=De(qe(t,i,f));const u=t[10].default,c=ue(u,t,t[9],null);let d=[Ke,t[7],{width:t[2]},{height:t[2]},{stroke:t[1]},{"stroke-width":n=t[4]?Number(t[3])*24/Number(t[2]):t[3]},{class:o=t[6]("lucide-icon","lucide",t[0]?`lucide-${t[0]}`:"",t[8].class)}],a={};for(let f=0;f<d.length;f+=1)a=N(a,d[f]);return{c(){e=He("svg");for(let f=0;f<l.length;f+=1)l[f].c();s=oe(),c&&c.c(),he(e,a)},m(f,p){C(f,e,p);for(let h=0;h<l.length;h+=1)l[h]&&l[h].m(e,null);v(e,s),c&&c.m(e,null),r=!0},p(f,[p]){if(p&32){i=ge(f[5]);let h;for(h=0;h<i.length;h+=1){const L=qe(f,i,h);l[h]?l[h].p(L,p):(l[h]=De(L),l[h].c(),l[h].m(e,s))}for(;h<l.length;h+=1)l[h].d(1);l.length=i.length}c&&c.p&&(!r||p&512)&&fe(c,u,f,f[9],r?ce(u,f[9],p,null):ae(f[9]),null),he(e,a=le(d,[Ke,p&128&&f[7],(!r||p&4)&&{width:f[2]},(!r||p&4)&&{height:f[2]},(!r||p&2)&&{stroke:f[1]},(!r||p&28&&n!==(n=f[4]?Number(f[3])*24/Number(f[2]):f[3]))&&{"stroke-width":n},(!r||p&257&&o!==(o=f[6]("lucide-icon","lucide",f[0]?`lucide-${f[0]}`:"",f[8].class)))&&{class:o}]))},i(f){r||(m(c,f),r=!0)},o(f){y(c,f),r=!1},d(f){f&&w(e),Ae(l,f),c&&c.d(f)}}}function _t(t,e,s){const n=["name","color","size","strokeWidth","absoluteStrokeWidth","iconNode","mergeClasses"];let o=xe(e,n),{$$slots:r={},$$scope:i}=e,{name:l=void 0}=e,{color:u="currentColor"}=e,{size:c=24}=e,{strokeWidth:d=2}=e,{absoluteStrokeWidth:a=!1}=e,{iconNode:f}=e;const p=(...h)=>h.filter((L,ne,_)=>!!L&&_.indexOf(L)===ne).join(" ");return t.$$set=h=>{s(8,e=N(N({},e),q(h))),s(7,o=xe(e,n)),"name"in h&&s(0,l=h.name),"color"in h&&s(1,u=h.color),"size"in h&&s(2,c=h.size),"strokeWidth"in h&&s(3,d=h.strokeWidth),"absoluteStrokeWidth"in h&&s(4,a=h.absoluteStrokeWidth),"iconNode"in h&&s(5,f=h.iconNode),"$$scope"in h&&s(9,i=h.$$scope)},e=q(e),[l,u,c,d,a,f,p,o,e,i,r]}class bt extends I{constructor(e){super(),B(this,e,_t,mt,O,{name:0,color:1,size:2,strokeWidth:3,absoluteStrokeWidth:4,iconNode:5,mergeClasses:6})}get mergeClasses(){return this.$$.ctx[6]}}const Se=bt;function $t(t){let e;const s=t[2].default,n=ue(s,t,t[3],null);return{c(){n&&n.c()},m(o,r){n&&n.m(o,r),e=!0},p(o,r){n&&n.p&&(!e||r&8)&&fe(n,s,o,o[3],e?ce(s,o[3],r,null):ae(o[3]),null)},i(o){e||(m(n,o),e=!0)},o(o){y(n,o),e=!1},d(o){n&&n.d(o)}}}function vt(t){let e,s;const n=[{name:"bot-message-square"},t[1],{iconNode:t[0]}];let o={$$slots:{default:[$t]},$$scope:{ctx:t}};for(let r=0;r<n.length;r+=1)o=N(o,n[r]);return e=new Se({props:o}),{c(){A(e.$$.fragment)},m(r,i){M(e,r,i),s=!0},p(r,[i]){const l=i&3?le(n,[n[0],i&2&&Ne(r[1]),i&1&&{iconNode:r[0]}]):{};i&8&&(l.$$scope={dirty:i,ctx:r}),e.$set(l)},i(r){s||(m(e.$$.fragment,r),s=!0)},o(r){y(e.$$.fragment,r),s=!1},d(r){T(e,r)}}}function yt(t,e,s){let{$$slots:n={},$$scope:o}=e;const r=[["path",{d:"M12 6V2H8"}],["path",{d:"m8 18-4 4V8a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2Z"}],["path",{d:"M2 12h2"}],["path",{d:"M9 11v2"}],["path",{d:"M15 11v2"}],["path",{d:"M20 12h2"}]];return t.$$set=i=>{s(1,e=N(N({},e),q(i))),"$$scope"in i&&s(3,o=i.$$scope)},e=q(e),[r,e,n,o]}class kt extends I{constructor(e){super(),B(this,e,yt,vt,O,{})}}const wt=kt;function Nt(t){let e;const s=t[2].default,n=ue(s,t,t[3],null);return{c(){n&&n.c()},m(o,r){n&&n.m(o,r),e=!0},p(o,r){n&&n.p&&(!e||r&8)&&fe(n,s,o,o[3],e?ce(s,o[3],r,null):ae(o[3]),null)},i(o){e||(m(n,o),e=!0)},o(o){y(n,o),e=!1},d(o){n&&n.d(o)}}}function Ct(t){let e,s;const n=[{name:"bot"},t[1],{iconNode:t[0]}];let o={$$slots:{default:[Nt]},$$scope:{ctx:t}};for(let r=0;r<n.length;r+=1)o=N(o,n[r]);return e=new Se({props:o}),{c(){A(e.$$.fragment)},m(r,i){M(e,r,i),s=!0},p(r,[i]){const l=i&3?le(n,[n[0],i&2&&Ne(r[1]),i&1&&{iconNode:r[0]}]):{};i&8&&(l.$$scope={dirty:i,ctx:r}),e.$set(l)},i(r){s||(m(e.$$.fragment,r),s=!0)},o(r){y(e.$$.fragment,r),s=!1},d(r){T(e,r)}}}function Et(t,e,s){let{$$slots:n={},$$scope:o}=e;const r=[["path",{d:"M12 8V4H8"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2"}],["path",{d:"M2 14h2"}],["path",{d:"M20 14h2"}],["path",{d:"M15 13v2"}],["path",{d:"M9 13v2"}]];return t.$$set=i=>{s(1,e=N(N({},e),q(i))),"$$scope"in i&&s(3,o=i.$$scope)},e=q(e),[r,e,n,o]}class St extends I{constructor(e){super(),B(this,e,Et,Ct,O,{})}}const jt=St;function Mt(t){let e;const s=t[2].default,n=ue(s,t,t[3],null);return{c(){n&&n.c()},m(o,r){n&&n.m(o,r),e=!0},p(o,r){n&&n.p&&(!e||r&8)&&fe(n,s,o,o[3],e?ce(s,o[3],r,null):ae(o[3]),null)},i(o){e||(m(n,o),e=!0)},o(o){y(n,o),e=!1},d(o){n&&n.d(o)}}}function Tt(t){let e,s;const n=[{name:"user"},t[1],{iconNode:t[0]}];let o={$$slots:{default:[Mt]},$$scope:{ctx:t}};for(let r=0;r<n.length;r+=1)o=N(o,n[r]);return e=new Se({props:o}),{c(){A(e.$$.fragment)},m(r,i){M(e,r,i),s=!0},p(r,[i]){const l=i&3?le(n,[n[0],i&2&&Ne(r[1]),i&1&&{iconNode:r[0]}]):{};i&8&&(l.$$scope={dirty:i,ctx:r}),e.$set(l)},i(r){s||(m(e.$$.fragment,r),s=!0)},o(r){y(e.$$.fragment,r),s=!1},d(r){T(e,r)}}}function Ot(t,e,s){let{$$slots:n={},$$scope:o}=e;const r=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}],["circle",{cx:"12",cy:"7",r:"4"}]];return t.$$set=i=>{s(1,e=N(N({},e),q(i))),"$$scope"in i&&s(3,o=i.$$scope)},e=q(e),[r,e,n,o]}class xt extends I{constructor(e){super(),B(this,e,Ot,Tt,O,{})}}const At=xt;function Re(t){let e,s,n,o,r,i,l;return s=new wt({}),{c(){e=$("button"),A(s.$$.fragment),n=x(),o=$("span"),o.textContent="Open chat",g(o,"class","sr-only"),g(e,"class","inline-flex items-center justify-center whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input hover:text-accent-foreground h-10 w-10 rounded-full bg-gray-900 text-gray-50 shadow-lg hover:bg-gray-900/90 focus:outline-none focus:ring-2 focus:ring-gray-950 dark:bg-gray-50 dark:text-gray-900 dark:hover:bg-gray-50/90 dark:focus:ring-gray-300"),g(e,"type","button"),g(e,"aria-haspopup","dialog"),g(e,"aria-expanded","false"),g(e,"aria-controls","radix-:r1h:"),g(e,"data-state","closed")},m(u,c){C(u,e,c),M(s,e,null),v(e,n),v(e,o),r=!0,i||(l=z(e,"click",t[1]),i=!0)},i(u){r||(m(s.$$.fragment,u),r=!0)},o(u){y(s.$$.fragment,u),r=!1},d(u){u&&w(e),T(s),i=!1,l()}}}function Ht(t){let e,s,n=!t[0]&&Re(t);return{c(){n&&n.c(),e=oe()},m(o,r){n&&n.m(o,r),C(o,e,r),s=!0},p(o,[r]){o[0]?n&&(Q(),y(n,1,1,()=>{n=null}),X()):n?r&1&&m(n,1):(n=Re(o),n.c(),m(n,1),n.m(e.parentNode,e))},i(o){s||(m(n),s=!0)},o(o){y(n),s=!1},d(o){o&&w(e),n&&n.d(o)}}}function Pt(t,e,s){let{open:n}=e;function o(r){ft.call(this,t,r)}return t.$$set=r=>{"open"in r&&s(0,n=r.open)},[n,o]}class Lt extends I{constructor(e){super(),B(this,e,Pt,Ht,O,{open:0})}}function Bt(t){let e,s;return e=new At({}),{c(){A(e.$$.fragment)},m(n,o){M(e,n,o),s=!0},i(n){s||(m(e.$$.fragment,n),s=!0)},o(n){y(e.$$.fragment,n),s=!1},d(n){T(e,n)}}}function It(t){let e,s;return e=new jt({}),{c(){A(e.$$.fragment)},m(n,o){M(e,n,o),s=!0},i(n){s||(m(e.$$.fragment,n),s=!0)},o(n){y(e.$$.fragment,n),s=!1},d(n){T(e,n)}}}function zt(t){let e,s,n,o,r;const i=[It,Bt],l=[];function u(c,d){return c[0]=="agent"?0:1}return n=u(t),o=l[n]=i[n](t),{c(){e=$("span"),s=$("span"),o.c(),g(s,"class","flex h-full w-full items-center justify-center rounded-full bg-muted"),g(e,"class","relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full")},m(c,d){C(c,e,d),v(e,s),l[n].m(s,null),r=!0},p(c,[d]){let a=n;n=u(c),n!==a&&(Q(),y(l[a],1,1,()=>{l[a]=null}),X(),o=l[n],o||(o=l[n]=i[n](c),o.c()),m(o,1),o.m(s,null))},i(c){r||(m(o),r=!0)},o(c){y(o),r=!1},d(c){c&&w(e),l[n].d()}}}function Wt(t,e,s){let{author:n}=e;return t.$$set=o=>{"author"in o&&s(0,n=o.author)},[n]}class Je extends I{constructor(e){super(),B(this,e,Wt,zt,O,{author:0})}}const ee=[];function Ue(t,e=k){let s;const n=new Set;function o(l){if(O(t,l)&&(t=l,s)){const u=!ee.length;for(const c of n)c[1](),ee.push(c,t);if(u){for(let c=0;c<ee.length;c+=2)ee[c][0](ee[c+1]);ee.length=0}}}function r(l){o(l(t))}function i(l,u=k){const c=[l,u];return n.add(c),n.size===1&&(s=e(o,r)||k),l(t),()=>{n.delete(c),n.size===0&&s&&(s(),s=null)}}return{set:o,update:r,subscribe:i}}const Ve={contents:"Hello, how can I assist you today?",author:"agent",updating:!1};let D=JSON.parse(window.localStorage.getItem("ChatPluginMessageHistory")||"null");(D===null||D.length===0)&&(D=[Ve]),D[D.length-1].updating&&(D.pop(),D.pop());let P=Ue(D);P.subscribe(t=>{localStorage.setItem("ChatPluginMessageHistory",JSON.stringify(t))});let te=Ue("TextInput");function Kt(t){let e,s,n,o,r;return{c(){e=$("button"),e.textContent="End",s=x(),n=$("button"),n.textContent="Continue",g(e,"class","inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border h-10 px-4 py-2 bg-transparent border-red-500 text-red-500 hover:bg-red-500 hover:text-gray-50 w-1/2"),g(n,"class","inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input hover:text-accent-foreground h-10 px-4 py-2 bg-white text-gray-900 hover:bg-gray-200 w-1/2")},m(i,l){C(i,e,l),C(i,s,l),C(i,n,l),o||(r=[z(e,"click",t[0]),z(n,"click",t[1])],o=!0)},p:k,i:k,o:k,d(i){i&&(w(e),w(s),w(n)),o=!1,K(r)}}}function qt(t,e,s){let n,o;se(t,P,u=>s(3,n=u)),se(t,te,u=>s(4,o=u));let{open:r}=e;const i=()=>{_e(P,n=[Ve],n),_e(te,o="TextInput",o),s(2,r=!1)},l=()=>{n.push({contents:"<END>",author:"agent",updating:!1,hidden:!0}),n.push({contents:"SYSTEM: The user indicated they wanted to continue the conversation. Await their next message.",author:"user",updating:!1,hidden:!0}),_e(te,o="TextInput",o),P.set(n)};return t.$$set=u=>{"open"in u&&s(2,r=u.open)},[i,l,r]}class Dt extends I{constructor(e){super(),B(this,e,qt,Kt,O,{open:2})}}function Rt(t){let e,s,n,o,r;return{c(){e=$("input"),s=x(),n=$("button"),n.textContent="Send",g(e,"class","flex-1 flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"),g(e,"placeholder","Type your message..."),g(n,"class","inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-10 px-4 py-2")},m(i,l){C(i,e,l),Le(e,t[0]),C(i,s,l),C(i,n,l),o||(r=[z(e,"input",t[2]),z(e,"keydown",t[3]),z(n,"click",t[1])],o=!0)},p(i,[l]){l&1&&e.value!==i[0]&&Le(e,i[0])},i:k,o:k,d(i){i&&(w(e),w(s),w(n)),o=!1,K(r)}}}function Jt(t,e,s){let n;se(t,P,u=>s(4,n=u));let{message:o}=e;const r=()=>{o&&!n[n.length-1].updating&&(n.push({author:"user",contents:o,updating:!1}),P.set(n),s(0,o=""))};function i(){o=this.value,s(0,o)}const l=u=>u.key=="Enter"&&r();return t.$$set=u=>{"message"in u&&s(0,o=u.message)},[o,r,i,l]}class Ut extends I{constructor(e){super(),B(this,e,Jt,Rt,O,{message:0})}}const mn="";function Ye(t,e,s){const n=t.slice();return n[5]=e[s],n}function Fe(t){let e,s,n,o,r,i,l,u,c,d,a,f,p,h,L,ne,_=t[2]&&Ze(t),V=ge(t[3]),E=[];for(let b=0;b<V.length;b+=1)E[b]=Ge(Ye(t,V,b));const an=b=>y(E[b],1,1,()=>{E[b]=null}),Qe=[Xt,Qt],R=[];function Xe(b,S){return b[4]=="TextInput"?0:b[4]=="EndConversationPrompt"?1:-1}return~(f=Xe(t))&&(p=R[f]=Qe[f](t)),{c(){e=$("div"),s=$("div"),_&&_.c(),n=x(),o=$("div"),r=$("div"),r.innerHTML='<div class="text-sm font-medium">Support Agent</div>',i=x(),l=$("button"),l.innerHTML='<svg class="h-5 w-5" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"></path><path d="m6 6 12 12"></path></svg> <span class="sr-only">Close chat</span>',u=x(),c=$("div");for(let b=0;b<E.length;b+=1)E[b].c();d=x(),a=$("div"),p&&p.c(),g(r,"class","flex items-center gap-3"),g(o,"class","bg-gray-900 text-gray-50 px-4 py-3 rounded-t-lg flex items-center justify-between"),g(c,"class","flex-1 overflow-y-auto p-4 space-y-4 relative"),g(a,"class","bg-gray-100 px-4 py-3 rounded-b-lg flex items-center gap-2"),g(s,"class","flex flex-col h-[500px]"),g(e,"class","w-full max-w-md rounded-lg shadow-l bg-white")},m(b,S){C(b,e,S),v(e,s),_&&_.m(s,null),v(s,n),v(s,o),v(o,r),v(o,i),v(o,l),v(s,u),v(s,c);for(let J=0;J<E.length;J+=1)E[J]&&E[J].m(c,null);t[10](c),v(s,d),v(s,a),~f&&R[f].m(a,null),h=!0,L||(ne=[z(l,"click",t[9]),z(c,"scroll",t[6])],L=!0)},p(b,S){if(b[2]?_?_.p(b,S):(_=Ze(b),_.c(),_.m(s,n)):_&&(_.d(1),_=null),S&8){V=ge(b[3]);let j;for(j=0;j<V.length;j+=1){const et=Ye(b,V,j);E[j]?(E[j].p(et,S),m(E[j],1)):(E[j]=Ge(et),E[j].c(),m(E[j],1),E[j].m(c,null))}for(Q(),j=V.length;j<E.length;j+=1)an(j);X()}let J=f;f=Xe(b),f===J?~f&&R[f].p(b,S):(p&&(Q(),y(R[J],1,1,()=>{R[J]=null}),X()),~f?(p=R[f],p?p.p(b,S):(p=R[f]=Qe[f](b),p.c()),m(p,1),p.m(a,null)):p=null)},i(b){if(!h){for(let S=0;S<V.length;S+=1)m(E[S]);m(p),h=!0}},o(b){E=E.filter(Boolean);for(let S=0;S<E.length;S+=1)y(E[S]);y(p),h=!1},d(b){b&&w(e),_&&_.d(),Ae(E,b),t[10](null),~f&&R[f].d(),L=!1,K(ne)}}}function Ze(t){let e,s,n;return{c(){e=$("button"),e.textContent="Down",g(e,"class","bg-opacity-25 bg-black w-4 h-4 rounded-full absolute right-1/2 bottom-14")},m(o,r){C(o,e,r),s||(n=z(e,"click",t[7]),s=!0)},p:k,d(o){o&&w(e),s=!1,n()}}}function Vt(t){let e,s,n,o,r=t[5].contents+"",i,l,u,c,d;return u=new Je({props:{author:t[5].author}}),{c(){e=$("div"),s=$("div"),n=$("div"),o=$("p"),i=de(r),l=x(),A(u.$$.fragment),c=x(),g(n,"class","bg-gray-900 text-gray-50 p-3 rounded-lg max-w-[75%] text-sm"),g(s,"class","flex items-start gap-3 justify-end"),g(e,"class","flex items-start justify-end gap-3")},m(a,f){C(a,e,f),v(e,s),v(s,n),v(n,o),v(o,i),v(s,l),M(u,s,null),v(e,c),d=!0},p(a,f){(!d||f&8)&&r!==(r=a[5].contents+"")&&Pe(i,r);const p={};f&8&&(p.author=a[5].author),u.$set(p)},i(a){d||(m(u.$$.fragment,a),d=!0)},o(a){y(u.$$.fragment,a),d=!1},d(a){a&&w(e),T(u)}}}function Yt(t){let e,s,n,o,r,i,l;n=new Je({props:{author:t[5].author}});function u(a,f){return a[5].updating?Gt:Zt}let c=u(t),d=c(t);return{c(){e=$("div"),s=$("div"),A(n.$$.fragment),o=x(),r=$("div"),d.c(),i=x(),g(r,"class","bg-gray-100 p-3 rounded-lg max-w-[75%] text-sm"),g(s,"class","flex items-start gap-3"),g(e,"class","flex items-start gap-3")},m(a,f){C(a,e,f),v(e,s),M(n,s,null),v(s,o),v(s,r),d.m(r,null),v(e,i),l=!0},p(a,f){const p={};f&8&&(p.author=a[5].author),n.$set(p),c===(c=u(a))&&d?d.p(a,f):(d.d(1),d=c(a),d&&(d.c(),d.m(r,null)))},i(a){l||(m(n.$$.fragment,a),l=!0)},o(a){y(n.$$.fragment,a),l=!1},d(a){a&&w(e),T(n),d.d()}}}function Ft(t){return{c:k,m:k,p:k,i:k,o:k,d:k}}function Zt(t){let e,s=t[5].contents+"",n;return{c(){e=$("p"),n=de(s)},m(o,r){C(o,e,r),v(e,n)},p(o,r){r&8&&s!==(s=o[5].contents+"")&&Pe(n,s)},d(o){o&&w(e)}}}function Gt(t){let e;return{c(){e=$("div"),e.innerHTML='<div class="typing-dot svelte-1vr6k1j"></div> <div class="typing-dot svelte-1vr6k1j"></div> <div class="typing-dot svelte-1vr6k1j"></div>',g(e,"class","flex items-center justify-center gap-1")},m(s,n){C(s,e,n)},p:k,d(s){s&&w(e)}}}function Ge(t){let e,s,n,o;const r=[Ft,Yt,Vt],i=[];function l(u,c){return u[5].hidden?0:u[5].author=="agent"?1:2}return e=l(t),s=i[e]=r[e](t),{c(){s.c(),n=oe()},m(u,c){i[e].m(u,c),C(u,n,c),o=!0},p(u,c){let d=e;e=l(u),e===d?i[e].p(u,c):(Q(),y(i[d],1,1,()=>{i[d]=null}),X(),s=i[e],s?s.p(u,c):(s=i[e]=r[e](u),s.c()),m(s,1),s.m(n.parentNode,n))},i(u){o||(m(s),o=!0)},o(u){y(s),o=!1},d(u){u&&w(n),i[e].d(u)}}}function Qt(t){let e,s,n;function o(i){t[12](i)}let r={};return t[0]!==void 0&&(r.open=t[0]),e=new Dt({props:r}),F.push(()=>Ce(e,"open",o)),{c(){A(e.$$.fragment)},m(i,l){M(e,i,l),n=!0},p(i,l){const u={};!s&&l&1&&(s=!0,u.open=i[0],ye(()=>s=!1)),e.$set(u)},i(i){n||(m(e.$$.fragment,i),n=!0)},o(i){y(e.$$.fragment,i),n=!1},d(i){T(e,i)}}}function Xt(t){let e,s,n;function o(i){t[11](i)}let r={};return t[5]!==void 0&&(r.message=t[5]),e=new Ut({props:r}),F.push(()=>Ce(e,"message",o)),{c(){A(e.$$.fragment)},m(i,l){M(e,i,l),n=!0},p(i,l){const u={};!s&&l&32&&(s=!0,u.message=i[5],ye(()=>s=!1)),e.$set(u)},i(i){n||(m(e.$$.fragment,i),n=!0)},o(i){y(e.$$.fragment,i),n=!1},d(i){T(e,i)}}}function en(t){let e,s,n=t[0]&&Fe(t);return{c(){n&&n.c(),e=oe()},m(o,r){n&&n.m(o,r),C(o,e,r),s=!0},p(o,[r]){o[0]?n?(n.p(o,r),r&1&&m(n,1)):(n=Fe(o),n.c(),m(n,1),n.m(e.parentNode,e)):n&&(Q(),y(n,1,1,()=>{n=null}),X())},i(o){s||(m(n),s=!0)},o(o){y(n),s=!1},d(o){o&&w(e),n&&n.d(o)}}}function tn(t,e,s){let n,o;se(t,P,_=>s(3,n=_)),se(t,te,_=>s(4,o=_));let{open:r}=e,i="",l,u,c=!1,d=0;const a=()=>{if(l.scrollTop===l.scrollHeight-l.offsetHeight){s(2,c=!1);return}c||d>l.scrollTop&&s(2,c=!0),d=l.scrollTop},f=()=>{r&&l.scroll({top:l.scrollHeight,behavior:"smooth"})},p=()=>s(0,r=!r);function h(_){F[_?"unshift":"push"](()=>{l=_,s(1,l)})}function L(_){i=_,s(5,i)}function ne(_){r=_,s(0,r)}return t.$$set=_=>{"open"in _&&s(0,r=_.open)},t.$$.update=()=>{t.$$.dirty&263&&(r&&!u?(s(8,u=new MutationObserver(_=>{c||f()})),ze().then(()=>{f(),u.observe(l,{childList:!0,subtree:!0,attributes:!1})})):r||s(8,u=void 0))},[r,l,c,n,o,i,a,f,u,p,h,L,ne]}class nn extends I{constructor(e){super(),B(this,e,tn,en,O,{open:0})}}async function sn(t){let e="https://59t0kunv1k.execute-api.us-east-1.amazonaws.com/prod";P.subscribe(async s=>{if(s[s.length-1].author==="user"&&nt(te)==="TextInput"){let n=fetch(`${e}/create-chat`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({api_key:t,messages:s.map(r=>({message:r.contents,author:r.author}))})});P.update(r=>(r.push({author:"agent",contents:"",updating:!0}),r));let o=await(await n).json();if(o.response.includes("<END>")){te.set("EndConversationPrompt"),P.update(r=>(r.pop(),r=r,console.log(r),r));return}P.update(r=>(r[r.length-1].updating=!1,r[r.length-1].contents=o.response,r))}})}function on(){let t=document.body.getElementsByTagName("my-component")[0].shadowRoot,e=document.createElement("link");e.rel="stylesheet",e.href="https://compiled-js-plugins.s3.amazonaws.com/style.css",t.appendChild(e)}function rn(t){st(t,"svelte-va4hx6",".root.svelte-va4hx6{display:none}")}function ln(t){let e,s,n,o,r,i,l;n=new Lt({props:{open:t[0]}}),n.$on("click",t[2]);function u(d){t[3](d)}let c={};return t[0]!==void 0&&(c.open=t[0]),r=new nn({props:c}),F.push(()=>Ce(r,"open",u)),{c(){e=$("div"),s=$("div"),A(n.$$.fragment),o=x(),A(r.$$.fragment),g(s,"class","fixed bottom-4 right-4 z-50"),g(e,"class","root svelte-va4hx6")},m(d,a){C(d,e,a),v(e,s),M(n,s,null),v(s,o),M(r,s,null),l=!0},p(d,[a]){const f={};a&1&&(f.open=d[0]),n.$set(f);const p={};!i&&a&1&&(i=!0,p.open=d[0],ye(()=>i=!1)),r.$set(p)},i(d){l||(m(n.$$.fragment,d),m(r.$$.fragment,d),l=!0)},o(d){y(n.$$.fragment,d),y(r.$$.fragment,d),l=!1},d(d){d&&w(e),T(n),T(r)}}}function un(t,e,s){let{publicKey:n}=e;ct(async()=>{on(),await ze(),sn(n)});let o=!1;const r=()=>s(0,o=!o);function i(l){o=l,s(0,o)}return t.$$set=l=>{"publicKey"in l&&s(1,n=l.publicKey)},[o,n,r,i]}class cn extends I{constructor(e){super(),B(this,e,un,ln,O,{publicKey:1},rn)}get publicKey(){return this.$$.ctx[1]}set publicKey(e){this.$$set({publicKey:e}),we()}}customElements.define("my-component",pt(cn,{publicKey:{}},[],[],!0));function fn(t){let e=document.createElement("my-component");e.publicKey=t.publicKey,window.onload=function(){document.body.appendChild(e)}}return fn}();
